<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>A-Frame AR-in-VR Demo</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
</head>

<body>
    <!-- Scene with VR UI enabled -->
    <a-scene vr-mode-ui="enabled: true" embedded>

        <!-- Preload your webcam as a video asset -->
        <a-assets>
            <video id="camera" autoplay playsinline webkit-playsinline crossorigin="anonymous">
            </video>
        </a-assets>

        <!-- Sky sphere showing the webcam feed -->
        <a-sky material="shader: flat; src: #camera; side: back">
        </a-sky>

        <!-- A semi-transparent box floating in front of you -->
        <a-box position="0 1.5 -3" rotation="0 45 0" material="color: blue; opacity: 0.7">
        </a-box>

        <!-- A faint ground plane for context -->
        <a-plane rotation="-90 0 0" width="10" height="10" material="color: green; opacity: 0.3">
        </a-plane>

        <!-- Your camera / VR rig -->
        <a-entity id="rig">
            <a-camera></a-camera>
        </a-entity>
    </a-scene>

    <script>
        // Grab the <video> and hook up getUserMedia
        const videoEl = document.getElementById('camera');
        navigator.mediaDevices.getUserMedia({
            video: { facingMode: 'environment' },
            audio: false
        })
            .then(stream => {
                videoEl.srcObject = stream;
            })
            .catch(err => {
                console.error('Could not get user media:', err);
            });
    </script>
</body>

</html>